{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\reactjs\\\\laundry-logger\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\reactjs\\\\laundry-logger\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\reactjs\\\\laundry-logger\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';import axios from'axios';import LogContext from'./logContext';import logReducer from'./logReducer';import{GET_LOGS,ADD_LOG,DELETE_LOG,SET_CURRENT,CLEAR_CURRENT,FILTER_LOGS,CLEAR_LOGS,CLEAR_FILTER,LOG_ERROR,UPDATE_LOG}from'../types';var LogState=function LogState(props){var initialState={logs:null,current:null,filtered:null,error:null};var _useReducer=useReducer(logReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// Get Logs\nvar getLogs=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/logs');case 3:res=_context.sent;dispatch({type:GET_LOGS,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:LOG_ERROR,payload:_context.t0.response.msg});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getLogs(){return _ref.apply(this,arguments);};}();// Add Log\nvar addLog=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(log){var config,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{'Content-Type':'application/json'}};_context2.prev=1;_context2.next=4;return axios.post('/api/logs',log,config);case 4:res=_context2.sent;dispatch({type:ADD_LOG,payload:res.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:LOG_ERROR,payload:_context2.t0.response.msg});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function addLog(_x){return _ref2.apply(this,arguments);};}();// Delete Log\nvar deleteLog=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/api/logs/\".concat(id));case 3:dispatch({type:DELETE_LOG,payload:id});_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);dispatch({type:LOG_ERROR,payload:_context3.t0.response.msg});case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function deleteLog(_x2){return _ref3.apply(this,arguments);};}();// Update Log\nvar updateLog=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(log){var config,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:config={headers:{'Content-Type':'application/json'}};_context4.prev=1;_context4.next=4;return axios.put(\"/api/logs/\".concat(log._id),log,config);case 4:res=_context4.sent;dispatch({type:UPDATE_LOG,payload:res.data});_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);dispatch({type:LOG_ERROR,payload:_context4.t0.response.msg});case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[1,8]]);}));return function updateLog(_x3){return _ref4.apply(this,arguments);};}();// const updateLog = (log) => {\n//   dispatch({ type: UPDATE_LOG, payload: log });\n//   console.log(log);\n// };\n// Clear Logs\nvar clearLogs=function clearLogs(){dispatch({type:CLEAR_LOGS});};// Set Current Log\nvar setCurrent=function setCurrent(log){dispatch({type:SET_CURRENT,payload:log});};// Clear Current Log\nvar clearCurrent=function clearCurrent(){dispatch({type:CLEAR_CURRENT});};// Filter Log\nvar filterLogs=function filterLogs(text){dispatch({type:FILTER_LOGS,payload:text});};// Clear Filter\nvar clearFilter=function clearFilter(){dispatch({type:CLEAR_FILTER});};return/*#__PURE__*/React.createElement(LogContext.Provider,{value:{logs:state.logs,current:state.current,filtered:state.filtered,error:state.error,addLog:addLog,deleteLog:deleteLog,setCurrent:setCurrent,clearCurrent:clearCurrent,filterLogs:filterLogs,updateLog:updateLog,clearFilter:clearFilter,getLogs:getLogs,clearLogs:clearLogs}},props.children);};export default LogState;","map":{"version":3,"sources":["D:/reactjs/laundry-logger/client/src/context/log/LogState.js"],"names":["React","useReducer","axios","LogContext","logReducer","GET_LOGS","ADD_LOG","DELETE_LOG","SET_CURRENT","CLEAR_CURRENT","FILTER_LOGS","CLEAR_LOGS","CLEAR_FILTER","LOG_ERROR","UPDATE_LOG","LogState","props","initialState","logs","current","filtered","error","state","dispatch","getLogs","get","res","type","payload","data","response","msg","addLog","log","config","headers","post","deleteLog","id","delete","updateLog","put","_id","clearLogs","setCurrent","clearCurrent","filterLogs","text","clearFilter","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from 'react';\r\nimport axios from 'axios';\r\nimport LogContext from './logContext';\r\nimport logReducer from './logReducer';\r\nimport {\r\n  GET_LOGS,\r\n  ADD_LOG,\r\n  DELETE_LOG,\r\n  SET_CURRENT,\r\n  CLEAR_CURRENT,\r\n  FILTER_LOGS,\r\n  CLEAR_LOGS,\r\n  CLEAR_FILTER,\r\n  LOG_ERROR,\r\n  UPDATE_LOG,\r\n} from '../types';\r\n\r\nconst LogState = (props) => {\r\n  const initialState = {\r\n    logs: null,\r\n    current: null,\r\n    filtered: null,\r\n    error: null,\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(logReducer, initialState);\r\n\r\n  // Get Logs\r\n  const getLogs = async () => {\r\n    try {\r\n      const res = await axios.get('/api/logs');\r\n\r\n      dispatch({\r\n        type: GET_LOGS,\r\n        payload: res.data,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: LOG_ERROR,\r\n        payload: err.response.msg,\r\n      });\r\n    }\r\n  };\r\n\r\n  // Add Log\r\n  const addLog = async (log) => {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post('/api/logs', log, config);\r\n\r\n      dispatch({ type: ADD_LOG, payload: res.data });\r\n    } catch (err) {\r\n      dispatch({ type: LOG_ERROR, payload: err.response.msg });\r\n    }\r\n  };\r\n\r\n  // Delete Log\r\n  const deleteLog = async (id) => {\r\n    try {\r\n      await axios.delete(`/api/logs/${id}`);\r\n\r\n      dispatch({\r\n        type: DELETE_LOG,\r\n        payload: id,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: LOG_ERROR,\r\n        payload: err.response.msg,\r\n      });\r\n    }\r\n  };\r\n\r\n  // Update Log\r\n  const updateLog = async (log) => {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    };\r\n\r\n    try {\r\n      const res = await axios.put(`/api/logs/${log._id}`, log, config);\r\n\r\n      dispatch({\r\n        type: UPDATE_LOG,\r\n        payload: res.data,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: LOG_ERROR,\r\n        payload: err.response.msg,\r\n      });\r\n    }\r\n  };\r\n  // const updateLog = (log) => {\r\n  //   dispatch({ type: UPDATE_LOG, payload: log });\r\n  //   console.log(log);\r\n  // };\r\n\r\n  // Clear Logs\r\n  const clearLogs = () => {\r\n    dispatch({ type: CLEAR_LOGS });\r\n  };\r\n\r\n  // Set Current Log\r\n  const setCurrent = (log) => {\r\n    dispatch({ type: SET_CURRENT, payload: log });\r\n  };\r\n\r\n  // Clear Current Log\r\n  const clearCurrent = () => {\r\n    dispatch({ type: CLEAR_CURRENT });\r\n  };\r\n\r\n  // Filter Log\r\n  const filterLogs = (text) => {\r\n    dispatch({ type: FILTER_LOGS, payload: text });\r\n  };\r\n\r\n  // Clear Filter\r\n  const clearFilter = () => {\r\n    dispatch({ type: CLEAR_FILTER });\r\n  };\r\n\r\n  return (\r\n    <LogContext.Provider\r\n      value={{\r\n        logs: state.logs,\r\n        current: state.current,\r\n        filtered: state.filtered,\r\n        error: state.error,\r\n        addLog,\r\n        deleteLog,\r\n        setCurrent,\r\n        clearCurrent,\r\n        filterLogs,\r\n        updateLog,\r\n        clearFilter,\r\n        getLogs,\r\n        clearLogs,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </LogContext.Provider>\r\n  );\r\n};\r\n\r\nexport default LogState;\r\n"]},"metadata":{},"sourceType":"module"}